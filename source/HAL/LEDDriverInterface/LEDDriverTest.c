/**
 * @file LEDDriverTest.c
 * @brief Contains the data buffers used to test the LED driver and a function to load this data buffer into active buffer
 *
 * (C) Copyright Centum T&S Group 2025. All rights reserved.
 * This computer program may not be used, copied, distributed, translated,
 * transmitted or assigned without the prior written authorization of
 * Centum T&S Group.
 */

//------------------------------------ [ INCLUDE FILES ] ----------------------------//
//
#include "stdint.h"
#include "HAL/LEDDriverInterface/LEDDriverTest.h"
#include "string.h"

//-------------------------------------[ GLOBAL VARIABLE ] --------------------------//
//
//Two Buffers for testing
uint8_t BitControlBuffer[ROWS_PER_PANEL][TOTAL_COLS_PER_ROW_BYTES] = {
		 {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x0F, 0x87, 0xF8, 0x70, 0x77, 0xFF, 0x1C, 0x38, 0x78, 0x3C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x3F, 0xC7, 0xF8, 0x78, 0x77, 0xFF, 0x1C, 0x38, 0x78, 0x3C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x78, 0x47, 0x00, 0x78, 0x70, 0x70, 0x1C, 0x38, 0x7C, 0x7C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xF0, 0x07, 0x00, 0x7C, 0x70, 0x70, 0x1C, 0x38, 0x7C, 0x7C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xE0, 0x07, 0x00, 0x7E, 0x70, 0x70, 0x1C, 0x38, 0x7E, 0xFC, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xE0, 0x07, 0xF8, 0x76, 0x70, 0x70, 0x1C, 0x38, 0x76, 0xDC, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xE0, 0x07, 0xF8, 0x77, 0x70, 0x70, 0x1C, 0x38, 0x77, 0xDC, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xE0, 0x07, 0x00, 0x73, 0xF0, 0x70, 0x1C, 0x38, 0x77, 0xDC, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0xF0, 0x07, 0x00, 0x73, 0xF0, 0x70, 0x1C, 0x38, 0x73, 0x9C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x78, 0x47, 0x00, 0x71, 0xF0, 0x70, 0x1C, 0x78, 0x73, 0x9C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x3F, 0xC7, 0xF8, 0x71, 0xF0, 0x70, 0x0F, 0xF0, 0x70, 0x1C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x0F, 0x87, 0xF8, 0x70, 0xF0, 0x70, 0x07, 0xE0, 0x70, 0x1C, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
};

uint8_t BitControlBufferHELLO[ROWS_PER_PANEL][TOTAL_COLS_PER_ROW_BYTES] = {
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x27, 0xE4, 0x04, 0x03, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x24, 0x04, 0x04, 0x04, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x24, 0x04, 0x04, 0x04, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x07, 0xE7, 0xC4, 0x04, 0x04, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x24, 0x04, 0x04, 0x04, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x24, 0x04, 0x04, 0x04, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x04, 0x27, 0xEE, 0xEE, 0xE3, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
	    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},};

//-------------------------------------[ GLOBAL FUNCTIONS ] -------------------------//
//
// **TESTING/DEMO FUNCTION:** This function loads a static, pre-defined bitmap from LEDDriverTest.h
// (containing "CENTUM" and "HELLO") into the operational display buffer.
// It bypasses the normal data generation process to quickly test display logic.
/**
 * @brief Loads static display data into a specified 2D buffer.
 *
 * Copies the data from a static source array into the dynamically allocated destination buffer.
 *
 * @param ptubBuffer Pointer to the destination 2D buffer (Active or Reserve).
 * @param BitControlBuffer The source static 2D array containing the image data.
 * @return true on success, false if the destination buffer is NULL.
 */
uint8_t LEDDriverTest_LoadData(uint8_t **ptubBuffer, uint8_t BitControlBuffer[ROWS_PER_PANEL][TOTAL_COLS_PER_ROW_BYTES])
{
    if (NULL == ptubBuffer)
    {
    	return 0;
    }

    // Since the destination memory is NOT contiguous, we must copy one row at a time.
    for (int i = 0; i < ROWS_PER_PANEL; i++)
    {
        // Source: BitControlBuffer[i] (The i-th row of the static array)
        // Destination: ptubBuffer[i] (The pointer to the i-th allocated memory block)
        // Size: BYTES_PER_ROW (16 bytes)
        memcpy(ptubBuffer[i],
               BitControlBuffer[i],
			   16);
    }

    return 1;
}
